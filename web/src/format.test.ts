import { S, words } from "./core"
import { format, makeFormatOptions } from "./format"

const en = ['en-US']

it('should interpolate format', () => {
  expect(format(en, '', {})).toEqual('')
  expect(format(en, 'foo', {})).toEqual('foo')
  expect(format(en, 'foo {} bar', {})).toEqual('foo  bar')
  expect(format(en, 'foo {   } bar', {})).toEqual('foo  bar')
  expect(format(en, '{foo}', { foo: 'bar' })).toEqual('bar')
  expect(format(en, '\n{\nfoo\n}\n', { foo: 'bar' })).toEqual('\nbar\n')
  expect(format(en, '  { foo   }  ', { foo: 'bar' })).toEqual('  bar  ')
  expect(format(en, '{foo} {qux}', { foo: 'bar', qux: 42 })).toEqual('bar 42')
})

const opt = (s: S) => makeFormatOptions(words(s))[1]
it('should translate number format', () => {
  expect(opt('n')).toEqual({ style: 'decimal' })
  expect(opt('p')).toEqual({ style: 'percent' })
  expect(opt('s')).toEqual({ notation: 'scientific' })
  expect(opt('e')).toEqual({ notation: 'engineering' })
  expect(opt('n-xs')).toEqual({ notation: 'compact' })
  expect(opt('n-s')).toEqual({ notation: 'compact', compactDisplay: 'long' })
  expect(opt('c-USD')).toEqual({ style: 'currency', currency: 'USD' })
  expect(opt('c-EUR')).toEqual({ style: 'currency', currency: 'EUR' })
  expect(opt('c-l')).toEqual({ currencyDisplay: 'name' })
  expect(opt('c-m')).toEqual({ currencyDisplay: 'code' })
  expect(opt('c-s')).toEqual({ currencyDisplay: 'symbol' })
  expect(opt('c-xs')).toEqual({ currencyDisplay: 'narrowSymbol' })
  expect(opt('a')).toEqual({ currencySign: 'accounting' })
  expect(opt('lm-fit')).toEqual({ localeMatcher: 'best fit' })
  expect(opt('lm-lookup')).toEqual({ localeMatcher: 'lookup' })
  expect(opt('nu-deva')).toEqual({ numberingSystem: 'deva' })
  expect(opt('nu-thai')).toEqual({ numberingSystem: 'thai' })
  expect(opt('g-n0')).toEqual({ signDisplay: 'auto' })
  expect(opt('g-pn0')).toEqual({ signDisplay: 'always' })
  expect(opt('g-pn')).toEqual({ signDisplay: 'exceptZero' })
  expect(opt('g-n')).toEqual({ signDisplay: 'negative' })
  expect(opt('g-off')).toEqual({ signDisplay: 'never' })
  expect(opt('u-degree')).toEqual({ style: 'unit', unit: 'degree' })
  expect(opt('u-inch')).toEqual({ style: 'unit', unit: 'inch' })
  expect(opt('u-l')).toEqual({ unitDisplay: 'long' })
  expect(opt('u-s')).toEqual({ unitDisplay: 'short' })
  expect(opt('u-xs')).toEqual({ unitDisplay: 'narrow' })
  expect(opt('id-5')).toEqual({ minimumIntegerDigits: 5 })
  expect(opt('fd-5')).toEqual({ minimumFractionDigits: 5 })
  expect(opt('fd-5-15')).toEqual({ minimumFractionDigits: 5, maximumFractionDigits: 15 })
  expect(opt('fd--15')).toEqual({ maximumFractionDigits: 15 })
  expect(opt('sd-5')).toEqual({ minimumSignificantDigits: 5 })
  expect(opt('sd-5-15')).toEqual({ minimumSignificantDigits: 5, maximumSignificantDigits: 15 })
  expect(opt('sd--15')).toEqual({ maximumSignificantDigits: 15 })
})

it('should translate date format', () => {
  expect(opt('d')).toEqual({ dateStyle: 'full' })
  expect(opt('d-l')).toEqual({ dateStyle: 'long' })
  expect(opt('d-m')).toEqual({ dateStyle: 'medium' })
  expect(opt('d-s')).toEqual({ dateStyle: 'short' })
  expect(opt('t')).toEqual({ timeStyle: 'full' })
  expect(opt('t-l')).toEqual({ timeStyle: 'long' })
  expect(opt('t-m')).toEqual({ timeStyle: 'medium' })
  expect(opt('t-s')).toEqual({ timeStyle: 'short' })
  expect(opt('dt')).toEqual({ dateStyle: 'full', timeStyle: 'full' })
  expect(opt('dt-l')).toEqual({ dateStyle: 'long', timeStyle: 'long' })
  expect(opt('dt-m')).toEqual({ dateStyle: 'medium', timeStyle: 'medium' })
  expect(opt('dt-s')).toEqual({ dateStyle: 'short', timeStyle: 'short' })
  expect(opt('ca-hebrew')).toEqual({ calendar: 'hebrew' })
  expect(opt('dp-l')).toEqual({ dayPeriod: 'long' })
  expect(opt('dp-s')).toEqual({ dayPeriod: 'short' })
  expect(opt('dp-xs')).toEqual({ dayPeriod: 'narrow' })
  expect(opt('nu-deva')).toEqual({ numberingSystem: 'deva' })
  expect(opt('nu-thai')).toEqual({ numberingSystem: 'thai' })
  expect(opt('lm-fit')).toEqual({ localeMatcher: 'best fit' })
  expect(opt('lm-lookup')).toEqual({ localeMatcher: 'lookup' })
  expect(opt('hc-12')).toEqual({ hourCycle: 'h12' })
  expect(opt('hc-24')).toEqual({ hourCycle: 'h24' })
  expect(opt('hc-11')).toEqual({ hourCycle: 'h11' })
  expect(opt('hc-23')).toEqual({ hourCycle: 'h23' })
  expect(opt('fm-fit')).toEqual({ formatMatcher: 'best fit' })
  expect(opt('fm-basic')).toEqual({ formatMatcher: 'basic' })
  expect(opt('wd-l')).toEqual({ weekday: 'long' })
  expect(opt('wd-s')).toEqual({ weekday: 'short' })
  expect(opt('wd-xs')).toEqual({ weekday: 'narrow' })
  expect(opt('er-l')).toEqual({ era: 'long' })
  expect(opt('er-s')).toEqual({ era: 'short' })
  expect(opt('er-xs')).toEqual({ era: 'narrow' })
  expect(opt('dy')).toEqual({ year: 'numeric' })
  expect(opt('dy-2')).toEqual({ year: '2-digit' })
  expect(opt('dm')).toEqual({ month: 'numeric' })
  expect(opt('dm-2')).toEqual({ month: '2-digit' })
  expect(opt('dm-l')).toEqual({ month: 'long' })
  expect(opt('dm-s')).toEqual({ month: 'short' })
  expect(opt('dm-xs')).toEqual({ month: 'narrow' })
  expect(opt('dd')).toEqual({ day: 'numeric' })
  expect(opt('dd-2')).toEqual({ day: '2-digit' })
  expect(opt('th')).toEqual({ hour: 'numeric' })
  expect(opt('th-2')).toEqual({ hour: '2-digit' })
  expect(opt('tm')).toEqual({ minute: 'numeric' })
  expect(opt('tm-2')).toEqual({ minute: '2-digit' })
  expect(opt('ts')).toEqual({ second: 'numeric' })
  expect(opt('ts-2')).toEqual({ second: '2-digit' })
  expect(opt('fs-0')).toEqual({ fractionalSecondDigits: 0 })
  expect(opt('fs-1')).toEqual({ fractionalSecondDigits: 1 })
  expect(opt('fs-2')).toEqual({ fractionalSecondDigits: 2 })
  expect(opt('fs-3')).toEqual({ fractionalSecondDigits: 3 })
  expect(opt('tz-l')).toEqual({ timeZoneName: 'long' })
  expect(opt('tz-s')).toEqual({ timeZoneName: 'short' })
  expect(opt('tz-o-l')).toEqual({ timeZoneName: 'longOffset' })
  expect(opt('tz-o-s')).toEqual({ timeZoneName: 'shortOffset' })
  expect(opt('tz-g-l')).toEqual({ timeZoneName: 'longGeneric' })
  expect(opt('tz-g-s')).toEqual({ timeZoneName: 'shortGeneric' })
})